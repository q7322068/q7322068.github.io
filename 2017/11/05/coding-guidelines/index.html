<!DOCTYPE html>
<html lang=zh>
<head>
    <meta charset="utf-8">
    
    <title>Java编程规范（自我总结版一） | 足迹|成长之路</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="又一次阅读阿里编程规范，发现有不少条目又给忘了，离上次阅读大概一个多月。我的阅读习惯应该还不错，每次看书籍之类的不会只看一遍，因为之前的经验发现，只看一遍的内容，会特别快的遗忘，在脑子里只会留下淡淡的印象，知道看过哪块的内容，但详细的内容就模糊了，面试时经历过这样尴尬的场面…">
<meta name="keywords" content="java实战,编程规范">
<meta property="og:type" content="article">
<meta property="og:title" content="Java编程规范（自我总结版一）">
<meta property="og:url" content="http://www.onecoderspace.com/2017/11/05/coding-guidelines/index.html">
<meta property="og:site_name" content="足迹|成长之路">
<meta property="og:description" content="又一次阅读阿里编程规范，发现有不少条目又给忘了，离上次阅读大概一个多月。我的阅读习惯应该还不错，每次看书籍之类的不会只看一遍，因为之前的经验发现，只看一遍的内容，会特别快的遗忘，在脑子里只会留下淡淡的印象，知道看过哪块的内容，但详细的内容就模糊了，面试时经历过这样尴尬的场面…">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2017-11-06T13:55:49.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Java编程规范（自我总结版一）">
<meta name="twitter:description" content="又一次阅读阿里编程规范，发现有不少条目又给忘了，离上次阅读大概一个多月。我的阅读习惯应该还不错，每次看书籍之类的不会只看一遍，因为之前的经验发现，只看一遍的内容，会特别快的遗忘，在脑子里只会留下淡淡的印象，知道看过哪块的内容，但详细的内容就模糊了，面试时经历过这样尴尬的场面…">
    

    
        <link rel="alternate" href="/atom.xml" title="足迹|成长之路" type="application/atom+xml" />
    

    

    <link rel="stylesheet" href="/vendor/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/vendor/open-sans/styles.css">
    <link rel="stylesheet" href="/vendor/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/vendor/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/vendor/lightgallery/css/lightgallery.min.css">
    
    
    
    
    


</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">足迹|成长之路</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/.">主页</a>
                
                    <a class="main-nav-link" href="/archives">归档</a>
                
                    <a class="main-nav-link" href="/2017/09/25/spring-boot项目实战：目录/">spring boot实战</a>
                
                    <a class="main-nav-link" href="/about">关于我</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="/css/images/avatar.jpg" />
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="想要查找什么..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/.">主页</a></td>
                
                    <td><a class="main-nav-link" href="/archives">归档</a></td>
                
                    <td><a class="main-nav-link" href="/2017/09/25/spring-boot项目实战：目录/">spring boot实战</a></td>
                
                    <td><a class="main-nav-link" href="/about">关于我</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="/css/images/avatar.jpg" />
            <h2 id="name">杨文魁</h2>
            <h3 id="title">本分的java web程序员，写写代码，做做架构，愿意沉下心学习新的技术，在这里分享记录学习工作中的心得</h3>
            <span id="location"><i class="fa fa-map-marker"></i>中国 - 上海</span>
            <a id="follow" target="_blank" href="http://www.onecoderspace.com/about">关注我</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                23
                <span>文章</span>
            </div>
            <div class="article-info-block">
                43
                <span>标签</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="https://github.com/q7322068" target="_blank" title="github" class=tooltip>
                            <i class="fa fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="mailto:q7322068@126.com" target="_blank" title="envelope" class=tooltip>
                            <i class="fa fa-envelope"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/css/images/myweixin.png" target="_blank" title="weixin" class=tooltip>
                            <i class="fa fa-weixin"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/atom.xml" target="_blank" title="rss" class=tooltip>
                            <i class="fa fa-rss"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            <section id="main"><article id="post-coding-guidelines" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
            Java编程规范（自我总结版一）
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2017/11/05/coding-guidelines/">
            <time datetime="2017-11-05T11:23:03.000Z" itemprop="datePublished">2017-11-05</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/java实战/">java实战</a>
    </div>

                        
    <!--<div class="article-tag">-->
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/java实战/">java实战</a>, <a class="tag-link" href="/tags/编程规范/">编程规范</a>
    <!--</div>-->


                        
                          <span id="busuanzi_container_site_pv" style='display:none;float: right'>
                          <i class="fa fa-eye" aria-hidden="true" style="margin-right:5px;"></i><span id="busuanzi_value_page_pv"></span>人阅读
                        </span>
                        
                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>又一次阅读阿里编程规范，发现有不少条目又给忘了，离上次阅读大概一个多月。我的阅读习惯应该还不错，每次看书籍之类的不会只看一遍，因为之前的经验发现，只看一遍的内容，会特别快的遗忘，在脑子里只会留下淡淡的印象，知道看过哪块的内容，但详细的内容就模糊了，面试时经历过这样尴尬的场面…<br><a id="more"></a><br>现在我看书，通常是第一遍通读，了解大概；第二遍细度核心知识点，强化理解核心内容；然后在脑中回思书中的核心内容，有不明白的地方就再翻书看一遍，做到理解，转化为自己的知识，效果来看还不错，你也可以试下！  </p>
<p>但发现在阿里编程规范这里还是会有问题，条目太多，按照顺序记忆可以做到一段时间内不忘记，但很多条目是日常编程不会用到的，时间稍长就会出现遗忘的情形，在编程的过程中万一不小心踩了雷就有点伤，所以尝试从自己思考问题的角度重新组织日常编码需要的注意事项，争取转化为编程时的本能^_^  </p>
<h3 id="一、环境准备"><a href="#一、环境准备" class="headerlink" title="一、环境准备"></a>一、环境准备</h3><p>检查下自己的IDE设置，确保设置为以下内容，以mac eclipse为例。</p>
<ol>
<li><p>IDE的text file encoding设置为 UTF-8；IDE中文件的换行符使用Unix格式，不要使用 Windows 格式（Eclipse -&gt; 偏好设置 -&gt; General -&gt; WorkSpace -&gt; 设置Text file encoding 和New text file line delimiter）。  </p>
</li>
<li><p>采用4个空格缩进，禁止使用tab字符，如果使用tab缩进，必须设置1个tab为4个空格（Eclipse -&gt; 偏好设置 -&gt; General -&gt; Editors -&gt; Text Editors -&gt; 设置Displayed tab width为4 -&gt; 勾选Insert spaces for tabs）。</p>
</li>
<li><p>Code Templates设置：为了统一编码规范，通常团队会有一个通用的Code Templates，问下同事，让他们导一份codetemplates.xml给你，如果你需要自己构建一个，百度一下吧，这里不再展开了。 </p>
</li>
</ol>
<ol>
<li>安装阿里云代码规范插件，历史代码或新项目里面，通过插件扫码，可以发现很多不规范的点，个人认为是java开发必装插件之一（<a href="https://github.com/alibaba/p3c/blob/master/eclipse-plugin/README_cn.md" target="_blank" rel="external">eclipse插件中文安装手册</a>）；  </li>
</ol>
<h3 id="二、命名"><a href="#二、命名" class="headerlink" title="二、命名"></a>二、命名</h3><p><strong>通用约束</strong>  </p>
<ol>
<li><p>代码中的命名均不能以下划线或美元符号开始，也不能以下划线或美元符号结束。 </p>
</li>
<li><p>代码中的命名严禁使用拼音与英文混合的方式，更不允许直接使用中文的方式。  </p>
</li>
<li>杜绝完全不规范的缩写，避免望文不知义。反例:AbstractClass“缩写”命名成 AbsClass。  </li>
<li>为了达到代码自解释的目标，任何自定义编程元素在命名时，使用尽量完整的单词组合来表达其意，如从远程仓库拉取代码的类命名为 PullCodeFromRemoteRepository。  </li>
<li>如果模块、接口、类、方法使用了设计模式，在命名时体现出具体模式。</li>
</ol>
<p>在日常开发中常见的涉及命名的点有：项目名称、包名、类名、方法名、变量名、数据库名、表名、字段名、索引名称、URL命名、文件名。</p>
<h5 id="1-项目名称"><a href="#1-项目名称" class="headerlink" title="1. 项目名称"></a>1. 项目名称</h5><p>小写字母或数字，不能使用数字开头，多个单词之间使用中划线连接，能准确的表达出项目的核心作用，如code-generator。（个人推荐）</p>
<h5 id="2-包名"><a href="#2-包名" class="headerlink" title="2. 包名"></a>2. 包名</h5><ul>
<li>包名统一使用小写，点分隔符之间有且仅有一个自然语义的英语单词。包名统一使用单数形式，但是类名如果有复数含义，类名可以使用复数形式。</li>
<li>如果表示版本关系等特殊情况，可以使用数字，如org.apache.commons.lang3.StringUtils</li>
</ul>
<h5 id="3-类名"><a href="#3-类名" class="headerlink" title="3. 类名"></a>3. 类名</h5><ul>
<li>类名使用 UpperCamelCase 风格，必须遵从驼峰形式，但以下情形例外:DO / BO / DTO / VO / AO。  </li>
<li>抽象类命名使用 Abstract 或 Base 开头;异常类命名使用 Exception 结尾;测试类命名以它要测试的类的名称开始，以 Test 结尾。      </li>
<li>对于 Service 和 DAO 类，基于 SOA 的理念，暴露出来的服务一定是接口，内部的实现类用 Impl 的后缀与接口区别。</li>
<li>枚举类名建议带上 Enum 后缀，枚举成员名称需要全大写，单词间用下划线隔开，如：枚举名字为ProcessStatusEnum的成员名称:SUCCESS / UNKOWN_REASON。</li>
<li>禁止使用非字母字符，特殊情况下可以使用2、4等数字。</li>
</ul>
<h5 id="4-属性名"><a href="#4-属性名" class="headerlink" title="4. 属性名"></a>4. 属性名</h5><ul>
<li>使用 lowerCamelCase 风格，必须遵从驼峰形式。</li>
<li>POJO类中布尔类型的变量，都不要加 is，否则部分框架解析会引起序列化错误，如标记删除字段用deleted而不是isDeleted。</li>
<li>尽量不要使用非字母字符</li>
</ul>
<h5 id="5-方法名"><a href="#5-方法名" class="headerlink" title="5. 方法名"></a>5. 方法名</h5><ul>
<li>使用 lowerCamelCase 风格，必须遵从驼峰形式；  </li>
<li>Service/DAO层方法命名规约<br>  1) 获取单个对象的方法用get做前缀。<br>  2) 获取多个对象的方法用list做前缀。<br>  3) 获取统计值的方法用count做前缀。<br>  4) 插入的方法用save/insert做前缀。<br>  5) 删除的方法用remove/delete做前缀。<br>  6) 修改的方法用update做前缀。  </li>
<li>尽量不要使用非字母字符，如数字，下划线，中划线等。</li>
</ul>
<h5 id="6-参数名、变量名"><a href="#6-参数名、变量名" class="headerlink" title="6. 参数名、变量名"></a>6. 参数名、变量名</h5><p>使用 lowerCamelCase 风格，必须遵从驼峰形式。</p>
<h5 id="7-常量"><a href="#7-常量" class="headerlink" title="7. 常量"></a>7. 常量</h5><ul>
<li>常量命名全部大写，单词间用下划线隔开，力求语义表达完整清楚，不要嫌名字长。</li>
<li>不允许任何魔法值(即未经定义的常量)直接出现在代码中。反例:String key = “Id#taobao_” + tradeId;</li>
</ul>
<h5 id="8-数据库名"><a href="#8-数据库名" class="headerlink" title="8. 数据库名"></a>8. 数据库名</h5><p>尽量和项目名称保持一致，如出现特殊情况按照项目名称命名规则进行命名。</p>
<h5 id="9-表名"><a href="#9-表名" class="headerlink" title="9. 表名"></a>9. 表名</h5><ul>
<li>必须使用小写字母或数字，禁止出现数字开头，禁止两个下划线中间只 出现数字，不允许出现任何大写字母，建议将类名内不同单词用下划线分割作为表名。  </li>
<li>表名不使用复数名词，表名应该仅仅表示表里面的实体内容，不应该表示实体数量，对应于 DO 类名也是单数 形式，符合表达习惯。  </li>
<li>表的命名可以考虑加上“业务名称_表的作用”，但需要规范统一命名，不要多种方式混合使用，如果表数据不是特别大，没有必要使用。  </li>
<li>禁用保留字，如 desc、range、match、delayed 等，请参考 MySQL 官方保留字。  </li>
</ul>
<h5 id="10-字段名"><a href="#10-字段名" class="headerlink" title="10. 字段名"></a>10. 字段名</h5><ul>
<li>必须使用小写字母或数字，禁止出现数字开头，禁止两个下划线中间只 出现数字，不允许出现任何大写字母，建议将属性名内不同单词用下划线分割作为字段名。</li>
<li>禁用保留字，如 desc、range、match、delayed 等，请参考 MySQL 官方保留字。</li>
<li>表达是与否概念的字段，必须使用 is_xxx 的方式命名，数据类型是 unsigned tinyint ( 1表示是，0表示否)。如标记删除字段deleted对应的字段名为is_deleted。</li>
</ul>
<h5 id="11-索引名"><a href="#11-索引名" class="headerlink" title="11. 索引名"></a>11. 索引名</h5><ul>
<li>主键索引名为 pk_字段名;</li>
<li>唯一索引名为 uk_字段名;</li>
<li>普通索引名则为 idx_字段名。</li>
</ul>
<h5 id="12-文件名"><a href="#12-文件名" class="headerlink" title="12. 文件名"></a>12. 文件名</h5><p>必须使用小写字母或数字，禁止数字开头，多个单词使用中划线连接，涉及的内容有：js文件、图片、css文件、jsp页面等（个人推荐）。</p>
<h5 id="13-URL命名"><a href="#13-URL命名" class="headerlink" title="13. URL命名"></a>13. URL命名</h5><ul>
<li>必须使用小写字母或数字，禁止数字开头，多个单词使用中划线连接。</li>
<li>限制URL层级不要太深（个人感觉3层以内较好）。</li>
</ul>
<h3 id="三、代码风格"><a href="#三、代码风格" class="headerlink" title="三、代码风格"></a>三、代码风格</h3><p>代码风格实际上就是合理使用缩进、空格、换行，目的是让代码可读性更强。大家记忆时记清楚用什么样的缩进，哪些时候使用空格，哪些时候使用换行，单行代码不要太长就可以，这部分内容通过两三次的回顾很容易养成习惯，因为是编码中最长用到的。<br>请看以下代码：</p>
<pre><code>public static void main(String[] args) {
    // 缩进 4 个空格
    String say = &quot;hello&quot;;
    // 运算符的左右必须有一个空格 
    int flag = 0;
    // 关键词if/for/while/switch/do与括号之间必须有一个空格，括号内的 flag 与左括号，0 与右括号不需要空格 
    if (flag == 0) {
       System.out.println(say);
    }

    // 左大括号前加空格且不换行;左大括号后换行 
    if (flag == 1) {
       System.out.println(&quot;world&quot;);
    // 右大括号前换行，右大括号后有 else，不用换行 
    } else {
       System.out.println(&quot;ok&quot;);
    // 在右大括号后直接结束，则必须换行
    }

    StringBuffer sb = new StringBuffer();  
    // 超过120个字符的情况下，换行缩进4个空格，点号和方法名称一起换行   
    sb.append(&quot;zi&quot;).append(&quot;xin&quot;)...  
       .append(&quot;huang&quot;)...  
       .append(&quot;huang&quot;)...  
       .append(&quot;huang&quot;);

   // 任何二目、三目运算符的左右两边都需要加一个空格
   int result = flag == 0 ? 1 : 0;
}
</code></pre><p>下边是另外几点需要注意的：</p>
<ol>
<li>注释的双斜线与注释内容之间有且仅有一个空格。  </li>
<li>方法参数在定义和传入时，多个参数逗号后边必须加空格，如method(“a”, “b”)。  </li>
<li>没有必要增加若干空格来使某一行的字符与上一行对应位置的字符对齐。</li>
<li>方法体内的执行语句组、变量的定义语句组、不同的业务逻辑之间或者不同的语义 之间插入一个空行。相同业务逻辑和语义之间不需要插入空行。没有必要插入多个空行进行隔开。</li>
</ol>
<h3 id="四、注释"><a href="#四、注释" class="headerlink" title="四、注释"></a>四、注释</h3><h5 id="1-项目"><a href="#1-项目" class="headerlink" title="1. 项目"></a>1. 项目</h5><p>项目建议提供注释，说明项目的作用，核心逻辑或需要注意的特别事项，方便其他人快速对项目形成整体了解。添加方式有两种：  </p>
<ol>
<li>在根目录下创建README.md或README.txt</li>
<li>在根目录下创建doc文件夹，在其创建README.md或README.txt，还可以在该目录下存储一些初始化语句、索引创建语句等内容</li>
</ol>
<h5 id="2-包"><a href="#2-包" class="headerlink" title="2. 包"></a>2. 包</h5><p>说明该包的核心作用，注释可在package-info.java内设置，建议在核心包上有选择添加。</p>
<h5 id="3-类"><a href="#3-类" class="headerlink" title="3. 类"></a>3. 类</h5><p>所有类都需要添加注释，类注释采用javadoc规范的方式( /<em>* </em>/ ),注释包括：该类的主要作用及使用时的一些注意事项、创建者和创建日期，可通过codetemplate来统一格式。</p>
<h5 id="4-类方法"><a href="#4-类方法" class="headerlink" title="4. 类方法"></a>4. 类方法</h5><p>类方法注释采用javadoc规范的方式( /<em>* </em>/ )，注释包括：该方法的作用、使用注意事项、参数、返回值、抛出异常信息，可通过codetemplate来统一格式，添加注释时可以模仿jdk内方法的注释。</p>
<p>如果注释的工作量太大，对于私有方法，可以简化注释，做到能清晰说明其作用即可。但是所有的抽象方法(包括接口中的方法)的注释必须严格的按照javadoc规范进行添加，需要额外指出对子类的实现要求，或者调用注意事项。</p>
<p>当然也会有例外情况，如controller内使用swagger2提供在线文档，那就没必要再提供javadoc注释了。</p>
<h5 id="5-类属性"><a href="#5-类属性" class="headerlink" title="5. 类属性"></a>5. 类属性</h5><p>所有的类属性都需要添加注释，所有可用通过类名.属性、对象实例.属性调用的类属性都应该使用javadoc进行注释，如常量、枚举类型字段；POJO类的属性个人感觉使用行内注释会更合适一些，普通实例变量建议使用javadoc方式。</p>
<h5 id="6-方法内"><a href="#6-方法内" class="headerlink" title="6. 方法内"></a>6. 方法内</h5><p>方法内部单行注释，在被注释语句上方另起一行，使用//注释。方法内部多行注释使用/<em> </em>/注释，注意与代码对齐。</p>
<p>可以这样记忆// 和 /<em> </em>/只在方法内部和POJO内使用，其他时候都使用javadoc方式的注释。</p>
<h5 id="7-其他建议"><a href="#7-其他建议" class="headerlink" title="7. 其他建议"></a>7. 其他建议</h5><ol>
<li>注释使用中文，专有名词与关键字保持英文原文即可。</li>
<li>代码修改的同时，注释也要进行相应的修改。</li>
<li>如果一段代码需要注释掉，在上方详细说明；如果代码已无用，直接删除更好。</li>
<li>TODO（待办事宜），FIXME（错误，不能工作）这类特殊注释标记，添加时留下添加人、时间、预计处理时间，并及时处理，不要写了就不管了。</li>
</ol>
<p>对于注释的要求:第一、能够准确反应设计思想和代码逻辑;第二、能够描述业务含义，使别的程序员能够迅速了解到代码背后的信息。完全没有注释的大段代码对于阅读者形同天书，注释是给自己看的，即使隔很长时间，也能清晰理解当时的思路;注释也是给继任者看的，使其能够快速接替自己的工作。  </p>
<p>额外的，好的命名、代码结构是自解释的，注释力求精简准确、表达到位。避免出现注释的一个极端:过多过滥的注释，代码的逻辑一旦修改，修改注释是相当大的负担。</p>
<h3 id="五、日志"><a href="#五、日志" class="headerlink" title="五、日志"></a>五、日志</h3><h5 id="1-日志配置"><a href="#1-日志配置" class="headerlink" title="1.日志配置"></a>1.日志配置</h5><p>主要有日志文件名称、日志输出级别、日志是否向上层传递、日志保留时间。</p>
<ol>
<li>日志文件推荐至少保存15天，因为有些异常具备以“周”为频次发生的特点。</li>
<li>避免重复打印日志，浪费磁盘空间，务必在 log4j.xml 中设置 additivity=false</li>
<li>谨慎地记录日志。生产环境禁止输出 debug 日志;有选择地输出 info 日志;如果使 用 warn 来记录刚上线时的业务行为信息，一定要注意日志输出量的问题，避免把服务器磁盘 撑爆，并记得及时删除这些观察日志。</li>
<li>应用中的扩展日志(如打点、临时监控、访问日志等)命名方式:appName_logType_logName.log。logType:日志类型，推荐分类有stats/desc/monitor/visit 等;logName:日志描述。这种命名的好处:通过文件名就可知 道日志文件属于什么应用，什么类型，什么目的，也有利于归类查找。</li>
</ol>
<h5 id="2-日志使用"><a href="#2-日志使用" class="headerlink" title="2.日志使用"></a>2.日志使用</h5><ol>
<li>应用中不可直接使用日志系统(Log4j、Logback)中的 API，而应依赖使用日志框架SLF4J 中的 API，使用门面模式的日志框架，有利于维护和各个类的日志处理方式统一。</li>
<li>对 trace/debug/info 级别的日志输出，必须使用条件输出形式或者使用占位符的方式。</li>
<li>异常信息应该包括两类信息:案发现场信息和异常堆栈信息。如果不处理，那么通过 关键字 throws 往上抛出。推荐<code>logger.error(各类参数或者对象toString + &quot;_&quot; + e.getMessage(), e);</code>这种格式，不要简单的输出e.getMessage()，那样具体的错误信息都被隐藏，很不利于排查问题。</li>
<li>注意日志输出级别和使用场景，避免大量调试日志被生成，最近就遇到过一次在高频接口输出调试信息，忘记清理，在调用高峰拖死了tomcat；在生成环境，尽量只记录异常信息和较重要的业务信息，且控制其量。</li>
<li>while、for循环等内部的异常需要特别注意发生异常的条件，曾经遇到过while循环从redis队列内取值（事件），redis服务宕机，结果异常日志刷爆磁盘的情况。</li>
</ol>
<h3 id="六、异常处理"><a href="#六、异常处理" class="headerlink" title="六、异常处理"></a>六、异常处理</h3><p>主要涉及什么情况下添加异常处理，捕获异常后的处理方式，finally内注意事项及其它几点建议。</p>
<h5 id="1-异常捕获"><a href="#1-异常捕获" class="headerlink" title="1. 异常捕获"></a>1. 异常捕获</h5><ol>
<li>不要捕获IndexOutOfBoundsException、NullPointerException等运行时异常，这类异常可以通过条件判断避免；也不要使用异常来做流程控制，异常的处理效率比条件分支低； </li>
<li>不要对大段代码进行try-catch，只在可能发生异常且需要对异常处理的场景有针对性的进行try-catch捕获异常；</li>
</ol>
<h5 id="2-异常处理"><a href="#2-异常处理" class="headerlink" title="2. 异常处理"></a>2. 异常处理</h5><ol>
<li>捕获异常后严禁什么也不做或者直接e.printStackTrace()输出信息至控制台；如果不想处理，将该异常抛给上层，最外层的业务使用者，必须处理异常，将其转化为用户可以理解的内容；</li>
<li>在代码中使用“抛异常”还是“返回错误码”，对于公司外的 http/api 开放接口必须 使用“错误码”;而应用内部推荐异常抛出;跨应用间 RPC 调用优先考虑使用 Result 方式，封 装 isSuccess()方法、“错误码”、“错误简短信息”。</li>
<li>定义时区分unchecked/checked 异常，避免直接抛出newRuntimeException()， 更不允许抛出 Exception 或者 Throwable，应使用有业务含义的自定义异常。</li>
</ol>
<h5 id="3-finally使用"><a href="#3-finally使用" class="headerlink" title="3. finally使用"></a>3. finally使用</h5><ol>
<li>在finally块中进行资源回收（关闭资源对象、流对象）时，有异常也要做try-catch</li>
<li>finally块中不能使用return，finally块中的Return返回后方法结束执行，不会执行try-catch块中的return语句；</li>
</ol>
<h5 id="4-其它建议"><a href="#4-其它建议" class="headerlink" title="4. 其它建议"></a>4. 其它建议</h5><ol>
<li>有 try 块放到了事务代码中，catch 异常后，如果需要回滚事务，一定要注意手动回 滚事务。   </li>
<li>防止 NPE，是程序员的基本修养，注意 NPE 产生的场景；  </li>
</ol>
<h3 id="七、单元测试"><a href="#七、单元测试" class="headerlink" title="七、单元测试"></a>七、单元测试</h3><h5 id="1-单元测试要求"><a href="#1-单元测试要求" class="headerlink" title="1. 单元测试要求"></a>1. 单元测试要求</h5><ol>
<li>单元测试代码必须写在如下工程目录:src/test/java，不允许写在业务代码目录下</li>
<li>单元测试应该是有测试框架定时自动执行的，不需要人工参与；单元测试用例之间不能互相调用，也不能依赖执行的先后次序；单元测试时可以重复执行的，不能受到外界环境的影响。</li>
<li>单元测试通常是方法级别，至多类级别。</li>
<li>单元测试作为一种质量保障手段，不建议项目发布后补充单元测试用例，建议在项目提测前完成单元测试。核心业务、核心应用、核心模块的增量代码确保单元测试通过.</li>
<li>在设计评审阶段，开发人员需要和测试人员一起确定单元测试范围，单元测试最好覆盖所有测试用例(UC)。</li>
<li>单元测试的基本目标:语句覆盖率达到 70%;核心模块的语句覆盖率和分支覆盖率都 要达到 100%</li>
</ol>
<h5 id="2-单元测试实现建议"><a href="#2-单元测试实现建议" class="headerlink" title="2. 单元测试实现建议"></a>2. 单元测试实现建议</h5><ol>
<li>对于数据库相关的查询，更新，删除等操作，不能假设数据库里的数据是存在的，或者直接操作数据库把数据插入进去，请使用程序插入或者导入数据的方式来准备数据。</li>
<li>和数据库相关的单元测试，可以设定自动回滚机制，不给数据库造成脏数据。或者对单元测试产生的数据有明确的前后缀标识。</li>
<li>对于不可测的代码建议做必要的重构，使代码变得可测，避免为了达到测试要求而 书写不规范测试代码。</li>
<li>编写单元测试代码遵守 BCDE 原则，以保证被测试模块的交付质量。<br>1）B:Border，边界值测试，包括循环边界、特殊取值、特殊时间点、数据顺序等。<br>2）C:Correct，正确的输入，并得到预期的结果。<br>3）D:Design，与设计文档相结合，来编写单元测试。<br>4）E:Error，强制错误信息输入(如:非法数据、异常流程、非业务允许输入等)，并得 到预期的结果。</li>
</ol>
<p>ps:如何写出合格的单元测试代码我也有点蒙，目前是核心service代码会写单元测试进行功能验证，有相关经验的朋友希望能给点建议。</p>
<h3 id="八、安全规约"><a href="#八、安全规约" class="headerlink" title="八、安全规约"></a>八、安全规约</h3><h5 id="1-操作权限"><a href="#1-操作权限" class="headerlink" title="1. 操作权限"></a>1. 操作权限</h5><p>隶属于用户个人的页面或者功能必须进行权限控制校验。防止没有做水平权限校验就可随意访问、修改、删除别人的数据，比如查看他人的私信 内容、修改他人的订单。</p>
<h5 id="2-XSS"><a href="#2-XSS" class="headerlink" title="2. XSS"></a>2. XSS</h5><p>跨站脚本攻击(Cross Site Scripting)，可以对用户录入内容进行白名单过滤，去除非法信息。禁止向 HTML 页面输出未经安全过滤或未正确转义的用户数据。</p>
<h5 id="3-CSRF"><a href="#3-CSRF" class="headerlink" title="3. CSRF"></a>3. CSRF</h5><p>CSRF（Cross-site request forgery）跨站请求伪造，是一类常见编程漏洞。对于存在 CSRF 漏洞的应用/网站，攻击者可以事先构造好URL，只要受害者用户一访问，后台便在用户不知情情况下对数据库中用户参数进行相应修改。表单、AJAX提交必须执行 CSRF 安全过滤，通常可以通过额外的token字段来实现。</p>
<h5 id="4-SQL注入"><a href="#4-SQL注入" class="headerlink" title="4. SQL注入"></a>4. SQL注入</h5><p>用户输入的 SQL 参数严格使用参数绑定或者 METADATA 字段值限定，防止 SQL 注入，禁止字符串拼接 SQL 访问数据库。</p>
<h5 id="5-用户请求参数有效性验证"><a href="#5-用户请求参数有效性验证" class="headerlink" title="5. 用户请求参数有效性验证"></a>5. 用户请求参数有效性验证</h5><p>忽略参数校验可能导致:  </p>
<ul>
<li>page size 过大导致内存溢出  </li>
<li>恶意 order by 导致数据库慢查询  </li>
<li>任意重定向  </li>
<li>SQL 注入  </li>
<li>反序列化注入  </li>
<li>正则输入源串拒绝服务 ReDoS，Java 代码用正则来验证客户端的输入，有些正则写法验证普通用户输入没有问题，但是如果攻击人员使用的是特殊构造的字符串来验证，有可能导致死循环的结果。</li>
</ul>
<h5 id="6-防重放限制"><a href="#6-防重放限制" class="headerlink" title="6. 防重放限制"></a>6. 防重放限制</h5><p>在使用平台资源，譬如短信、邮件、电话、下单、支付，必须实现正确的防重放限制， 如数量限制、疲劳度控制、验证码校验，避免被滥刷、资损。 如注册时发送验证码到手机，如果没有限制次数和频率，那么可以利用此功能骚扰到其它用户，并造成短信平台资源浪费（曾经阿里云的短信被一晚上刷了几百块的…）。</p>
<h5 id="7-防刷"><a href="#7-防刷" class="headerlink" title="7. 防刷"></a>7. 防刷</h5><p>发贴、评论、发送即时消息等用户生成内容的场景必须实现防刷、文本内容违禁词过滤等风控策略，敏感词过滤可以考虑阿里云的绿网服务。</p>
<h5 id="8-信息脱敏"><a href="#8-信息脱敏" class="headerlink" title="8. 信息脱敏"></a>8. 信息脱敏</h5><p>用户敏感数据禁止直接展示，必须对展示数据进行脱敏。 查看个人手机号码会显示成:158<em>**</em>9119，隐藏中间 4 位，防止隐私泄露。</p>
<p>MySQL和编程实践（集合、并发处理）等部分后续另起一篇文章来写。</p>

            <div class="article-copyright">
  <i class="fa fa-lightbulb-o"></i>本文由 <a href="http://www.onecoderspace.com/2017/11/05/coding-guidelines/index.html">足迹|成长之路</a> 创作，采用
  <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 进行许可。
  可自由转载、引用，但需署名作者且注明文章出处。本文链接为<a href="http://www.onecoderspace.com/2017/11/05/coding-guidelines/" target="_blank" rel="external">http://www.onecoderspace.com/2017/11/05/coding-guidelines/</a>
</div>

            <div class="article-dashang">
  <span>如果您觉得文章不错,可以请我喝一杯咖啡！</span><br/>
  <a id="btn_donate" class="btn_donate" target="_self" href="javascript:;" title="Donate 打赏"></a>
  <div id="dim-codes" hidden="hidden">
    <ul class="img_box_ul">
      <li><img src="/css/images/weixin.png" /></li>
      <li><img src="/css/images/zhifubao.png" /></li>
    </ul>
  </div>
</div>
<script type="text/javascript">
    $('#btn_donate').click(function(){
      $('#dim-codes').toggle(300);
    })
</script>

        
        </div>
        <footer class="article-footer">

            
    
        <a href="http://www.onecoderspace.com/2017/11/05/coding-guidelines/#comments" class="article-comment-link">评论</a>
    


            <div class="share-container">

    <div class="jiathis_style">
    <span class="jiathis_txt">分享到：</span>
    <a class="jiathis_button_qzone">QQ空间</a>
    <a class="jiathis_button_tsina">新浪微博</a>
    <a class="jiathis_button_tqq">腾讯微博</a>
    <a class="jiathis_button_weixin">微信</a>
    <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank">更多</a>
    <a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js" charset="utf-8"></script>
<style>
    .jiathis_style div:first-child:not(.jiadiv_01) {
        width: auto !important;
        border: none !important;
    }
    .jiathis_style .jiadiv_01 {
        margin: 10px 0;
        border-radius: 4px;
        border: #e1e1e1 solid 1px;
    }
    .jiathis_style .jiadiv_01 div:first-child {
        display: none;
    }
    .jiathis_style .jiadiv_02 {
        padding: 7px 0 !important;
    }
    .jiathis_style .jiadiv_02 .jiatitle {
        width: 85px;
        border: none;
        height: auto;
        margin: 3px 10px;
        padding: 6px 10px;
        border-radius: 4px;
    }
    .jiathis_style .jiadiv_02 .jiatitle:hover {
        border: none;
    }
    .jiathis_style .jiadiv_02 .jiatitle:nth-child(even) {
        margin-left: 0;
    }
    .jiathis_style .jtico:hover {
        opacity: 1;
    }
    .jiathis_style .ckepopBottom,
    .jiathis_style .centerBottom {
        width: auto !important;
        padding: 5px;
        background: #f7f7f7;
    }
</style>




</div>

        </footer>
    </div>
    
        
<nav id="article-nav">
    
    
        <a href="/2017/10/29/code-generator/" id="article-nav-older" class="article-nav-link-wrap">
            <strong class="article-nav-caption">下一篇</strong>
            <div class="article-nav-title">代码生成器</div>
        </a>
    
</nav>


    
</article>


    
    <section id="comments">
    
        
    <div id="uyan_frame"></div>

    
    </section>



</section>
            
                <aside id="sidebar">
   
        <div class="widget-wrap">
        <h3 class="widget-title">公告</h3>
        <div class="widget">
            <div class="card-front animated col s12 m12 l8 offset-l2 fadeInUp">
                <p class="board">
                    您好，您是第<span id="busuanzi_value_site_uv"></span>位访客<br>
                    602361158<br>
                    微信：sky602361158<br>
                    邮箱：q7322068@126.com<br><br>
                    欢迎交流与分享经验!</p>
            </div>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">分类</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/java实战/">java实战</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/spring-boot实战/">spring boot实战</a><span class="category-list-count">19</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端/">前端</a><span class="category-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">归档</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a><span class="archive-list-count">17</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a><span class="archive-list-count">5</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">标签云</h3>
        <div class="widget tagcloud">
            <a href="/tags/CORS/" style="font-size: 15px;">CORS</a> <a href="/tags/CSRF/" style="font-size: 15px;">CSRF</a> <a href="/tags/JPA/" style="font-size: 15px;">JPA</a> <a href="/tags/XSS/" style="font-size: 10px;">XSS</a> <a href="/tags/ajax-post跨域/" style="font-size: 10px;">ajax post跨域</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/html生成页面无法滚动/" style="font-size: 10px;">html生成页面无法滚动</a> <a href="/tags/java实战/" style="font-size: 10px;">java实战</a> <a href="/tags/java实战-spirng-boot-项目高效开发-自动构建-代码生成/" style="font-size: 10px;">java实战 spirng-boot 项目高效开发 自动构建 代码生成</a> <a href="/tags/json/" style="font-size: 10px;">json</a> <a href="/tags/ognl/" style="font-size: 10px;">ognl</a> <a href="/tags/redis/" style="font-size: 15px;">redis</a> <a href="/tags/shiro/" style="font-size: 15px;">shiro</a> <a href="/tags/shiro-session过期时间/" style="font-size: 10px;">shiro session过期时间</a> <a href="/tags/spring-boot/" style="font-size: 20px;">spring boot</a> <a href="/tags/spring-profile/" style="font-size: 10px;">spring profile</a> <a href="/tags/spring-boot实战/" style="font-size: 10px;">spring-boot实战</a> <a href="/tags/spring-session/" style="font-size: 15px;">spring-session</a> <a href="/tags/swagger2/" style="font-size: 10px;">swagger2</a> <a href="/tags/web基础框架/" style="font-size: 10px;">web基础框架</a> <a href="/tags/xss/" style="font-size: 10px;">xss</a> <a href="/tags/事务/" style="font-size: 15px;">事务</a> <a href="/tags/代码生成器/" style="font-size: 10px;">代码生成器</a> <a href="/tags/共享session/" style="font-size: 10px;">共享session</a> <a href="/tags/分布式锁/" style="font-size: 10px;">分布式锁</a> <a href="/tags/分布式锁，redis/" style="font-size: 10px;">分布式锁，redis</a> <a href="/tags/列表数据缓存/" style="font-size: 10px;">列表数据缓存</a> <a href="/tags/前端/" style="font-size: 10px;">前端</a> <a href="/tags/在线接口文档/" style="font-size: 10px;">在线接口文档</a> <a href="/tags/安全/" style="font-size: 10px;">安全</a> <a href="/tags/工具类/" style="font-size: 10px;">工具类</a> <a href="/tags/异常/" style="font-size: 10px;">异常</a> <a href="/tags/异常处理/" style="font-size: 10px;">异常处理</a> <a href="/tags/接口文档/" style="font-size: 10px;">接口文档</a> <a href="/tags/日志/" style="font-size: 15px;">日志</a> <a href="/tags/日期处理/" style="font-size: 10px;">日期处理</a> <a href="/tags/权限控制/" style="font-size: 15px;">权限控制</a> <a href="/tags/缓存/" style="font-size: 10px;">缓存</a> <a href="/tags/编程规范/" style="font-size: 10px;">编程规范</a> <a href="/tags/详情页返回列表无刷新/" style="font-size: 10px;">详情页返回列表无刷新</a> <a href="/tags/跨域/" style="font-size: 10px;">跨域</a> <a href="/tags/跨域支持/" style="font-size: 10px;">跨域支持</a> <a href="/tags/集合/" style="font-size: 10px;">集合</a>
        </div>
    </div>

    
        
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">链接</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="http://itmuch.com" target="_blank">周立</a>
                    </li>
                
                    <li>
                        <a href="http://blog.didispace.com" target="_blank">程序猿DD</a>
                    </li>
                
                    <li>
                        <a href="http://edisonxu.org" target="_blank">EdisonXu</a>
                    </li>
                
            </ul>
        </div>
    </div>


    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>

            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2017 杨文魁<br>
            本站总访问量<span id="busuanzi_value_site_pv"></span>次<br>
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>.
        </div>
    </div>
</footer>

        
    
    <script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=2144705"></script>



    
      <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
        <script src="/vendor/lightgallery/js/lightgallery.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-pager.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-hash.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-share.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-video.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>